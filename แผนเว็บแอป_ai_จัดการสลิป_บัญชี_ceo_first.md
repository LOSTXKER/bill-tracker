# แผนเว็บแอป AI จัดการสลิป & บัญชี (CEO-first)

## 1. เป้าหมายของระบบ (Goal)
- ลดภาระ CEO ในการส่งสลิปและอธิบายค่าใช้จ่าย
- ทำให้ข้อมูลค่าใช้จ่ายไม่ตกหล่น และตรวจสอบย้อนหลังได้ง่าย
- เชื่อมการทำงานระหว่าง CEO ↔ ฝ่ายบัญชีแบบ Real-time ผ่าน Line
- สร้างข้อมูล Pre-Accounting ที่พร้อมให้บัญชีทำงานต่อทันที

---

## 2. กลุ่มผู้ใช้งาน (User Roles)
### 2.1 CEO / ผู้บริหาร
- อัปโหลดสลิป
- ตรวจข้อมูลที่ AI อ่าน
- ดูภาพรวมค่าใช้จ่าย

### 2.2 Accounting / บัญชี
- ตรวจสอบและแก้ไขรายการ
- จัดหมวดบัญชีจริง
- ส่งออกข้อมูลเพื่อปิดงบ

### 2.3 Admin (ระบบ)
- ตั้งค่า AI
- จัดการบริษัท / ผู้ใช้
- กำหนดหมวดค่าใช้จ่ายมาตรฐาน

---

## 3. Core Flow การทำงาน
### Step 1: อัปโหลดสลิป
- ถ่ายรูป / อัปโหลดไฟล์ (jpg, png, pdf)
- อัปผ่านเว็บ หรือ Line OA

### Step 2: AI อ่านข้อมูล (OCR + AI Understanding)
- ดึงข้อมูลอัตโนมัติ:
  - ร้านค้า
  - วันที่
  - ยอดเงิน
  - VAT / ไม่ VAT
  - ประเภทค่าใช้จ่าย (Auto Tag)

### Step 3: CEO ตรวจและยืนยัน
- แก้ไขได้ถ้า AI อ่านผิด
- กด “ยืนยันรายการ”

### Step 4: บันทึกเป็น Pre-Accounting
- สถานะ: Pending Accounting
- ผูกกับบริษัทและงวดเดือน

### Step 5: แจ้งเตือน Line กลุ่มบัญชี
- ส่งสรุปรายการเข้า Line
- แนบลิงก์เปิดดูรายละเอียด

### Step 6: Accounting ตรวจและ Finalize
- แก้ไขหมวดบัญชี
- เปลี่ยนสถานะเป็น Approved

---

## 4. ฟีเจอร์หลัก (Features)
### 4.1 Receipt Management
- เก็บสลิปแบบแยกตามเดือน / บริษัท
- ค้นหาด้วยร้าน / จำนวนเงิน / วันที่

### 4.2 AI Learning System
- จำร้านประจำ
- จำ Pattern VAT
- แนะนำหมวดค่าใช้จ่ายอัตโนมัติ

### 4.3 Dashboard (CEO View)
- ค่าใช้จ่ายรายเดือน
- จำนวนสลิปที่ยังไม่เคลียร์
- ค่าใช้จ่ายตามหมวด

### 4.4 Line Integration
- แจ้งเตือนรายการใหม่
- กดดูรายละเอียดจาก Line

---

## 5. โครงสร้างข้อมูลเบื้องต้น (Data Model)
- Company
- User
- Receipt
- PreAccountingEntry
- AccountingEntry
- ExpenseCategory

---

## 6. UX / UI แนวคิด
- Mobile-first
- ปุ่มอัปโหลดใหญ่ กดง่าย
- ใช้ภาษาเข้าใจง่าย ไม่เป็นศัพท์บัญชี

---

## 7. เทคโนโลยีที่แนะนำ (Tech Stack)

### Frontend
- Next.js (App Router)
- Server Actions / API Routes
- Tailwind CSS
- รองรับ PWA (ใช้งานเหมือนแอปบนมือถือ)

### Backend / Infra
- Supabase
  - Auth (Email / OTP)
  - Database (PostgreSQL)
  - Storage (เก็บรูป/PDF สลิป)
  - Row Level Security (RLS) แยกข้อมูลตามบริษัท

### AI Layer
- OCR สำหรับอ่านตัวอักษรจากสลิป
- LLM สำหรับ:
  - แยกข้อมูลเชิงบริบท (ร้าน, วันที่, VAT, หมวดค่าใช้จ่าย)
  - ให้คะแนนความมั่นใจ (confidence)

### Integration
- Line Messaging API (Line OA)
- Webhook / Trigger จาก Supabase เพื่อแจ้งเตือนบัญชี

---

## 8. Roadmap การพัฒนา
### Phase 1: MVP
- อัปโหลดสลิป
- AI อ่านข้อมูล
- ส่งเข้า Line

### Phase 2: Smart AI
- เรียนรู้ร้านประจำ
- แนะนำหมวดแม่นขึ้น

### Phase 3: SaaS
- Multi-company
- Subscription
- Export ข้อมูลบัญชี

---

## 9. ตัวชี้วัดความสำเร็จ (KPIs)
- เวลาเฉลี่ยต่อสลิป < 1 นาที
- % AI อ่านถูกต้อง > 85%
- จำนวนสลิปตกหล่น = 0

---

## 10. แนวทางต่อยอดในอนาคต
- เชื่อม ERP / โปรแกรมบัญชี
- AI วิเคราะห์พฤติกรรมการใช้เงิน
- เตือนค่าใช้จ่ายผิดปกติ

